---
id: bam7pb731rxqgj1syflrg7r
title: "üóÇ Pandas"
desc: "Pr√©sentation et cheat sheet pour le package Pandas"
tags: anki
updated: 1703074564856
created: 1654705589479
---

`pandas` is an fast, powerful, flexible, open source, BSD-licensed library providing high-performance, easy-to-use data structures and data analysis tools built on top of the [Python](https://www.python.org/) programming language.

### R√©f√©rences

- [1]: https://learn.deeplearning.ai/pandas/lesson/1/introduction

- [Python for Data Analysis (3e)](https://wesmckinney.com/book/)
- [DeepLearning.AI Pandas](https://learn.deeplearning.ai/pandas/lesson/1/introduction)
- [Kaggle Learn Pandas](https://www.kaggle.com/learn/pandas)
- [pandas website](https://pandas.pydata.org/)
- [pandas documentation](https://pandas.pydata.org/pandas-docs/stable/index.html)

## Quelles sont les structures de donn√©es de pandas ?

<!-- notecardId: 1701642275234 -->

- `DataFrame`
  ![pandas dataframe](assets/pandas-dataframe.png)
- `Series`

[#Python]() [#Pandas]()

## Importer le _package_ pandas ?

<!-- notecardId: 1701642275264 -->

```python
>>> import pandas as pd
```

Par convention, on utilise le raccourci `pd` pour faire r√©f√©rence √† la librairie `pandas` par la suite.

[#Python]() [#Pandas]()

## Lire un fichier CSV (**C**omma-**S**eparated **V**alues)

<!-- notecardId: 1701642275271 -->

```pyhton
>>> df = pd.read_csv("data/titanic.csv")
```

## Afficher les premi√®res lignes d'un DataFrame avec Pandas

<!-- notecardId: 1701642275279 -->

```pyhton
>>> df.head()
```

Par d√©faut, `pandas` retourne les **5 premi√®res** lignes. On peut modifier cette affichage par d√©faut, en ajoutant un param√®tre √† la m√©thode, `df.head(10)`. [DeepLearning.AI Pandas][1]

## Afficher les derni√®res lignes d'un DataFrame

<!-- notecardId: 1701642275283 -->

```pyhton
>>> df.tail()
```

Par d√©faut, `pandas` retourne les **5 derni√®res** lignes. On peut modifier cette affichage par d√©faut, en ajoutant un param√®tre √† la m√©thode, comme `df.tail(10)`

## Conna√Ætre la taille d'un DataFrame.

<!-- notecardId: 1701642275289 -->

```python
>>> df.shape
```

Il n'est pas n√©cessaire de saisir les `()` apr√®s `shape`, car il s'agit d'un **attribut** et non une fonction ou une m√©thode.

## G√©n√©rer les statistiques descriptives d'une Series ou d'un DataFrame.

<!-- notecardId: 1701642275301 -->

```python
>>> df.describe()
```

## G√©n√©rer des informations d'un DataFrame comme l'index, le dtype, les noms de colonnes, les valeurs non nulles, etc.

<!-- notecardId: 1701642275305 -->

```python
>>> df.info()
```

## Retourner la liste des colonnes

<!-- notecardId: 1701642275310 -->

```python
>>> df.columns
```

Il s'agit d'un attribut et non pas une fonction ou une m√©thode, il ne faut pas ajouter les `()`

## G√©n√©rer un sous-ensemble d'un DataFrame sous la forme d'un nouveau `DataFrame`

<!-- notecardId: 1701642275314 -->

```python
>>> df[['title of columns', 'blabla']]
```

- `df[]` : notation de Pandas pour s√©lectionner des colonnes
- `['title of columns', 'blabla']` : une liste Python pour indiquer quelles sont les colonnes s√©lectionn√©es

## S√©lectionner al√©atoirement des lignes d'un DataFrame

<!-- notecardId: 1701642275318 -->

```python
>>> df.sample(5)
```

## Fixer la graine pour la g√©n√©ration al√©atoire de 'pd.sample()`

'random_state = 123'

```python
>>> df.sample(5, random_state = 345)
```

## drop()

<!-- notecardId: 1701642275367 -->

> Remove rows or columns by specifying label names and corresponding axis, or by specifying directly index or column names. When using a multi-index, labels on different levels can be removed by specifying the level

```python

```

### R√©f√©rences

- https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop.html?highlight=drop#pandas.DataFrame.drop

---

[panda cheat sheet](https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf)

--- fillna

Dans la grande majorit√© des datasets on trouve des valeurs manquantes, `Na`, `NaN`. On peut remplacer ces ¬´ non-valeurs ¬ª gr√¢ce √† la m√©thode `fillna()`

```python
compte_cheque['Debit'].fillna(0, inplace = True) # replacing missing values in Debit column with 0
compte_cheque['Credit'].fillna(0, inplace = True) # replacing missing values in Credit column with 0
```

L‚Äôargument `inplace=True` modifie directement la variable sans avoir besoin de l‚Äôappler √† nouveau. Ainsi :

```python
compte_cheque['Debit'] = compte_cheque['Debit'].fillna(0)
```

Devient :

```python
compte_cheque['Debit'].fillna(0, inplace = True)
```

--- pd.options

```python
pd.options.display.float_format = '{:.5f}'.format
pd.options.display.max_rows = 100
```

- `display.max_rows` : [[pt.dt.int]]

  If max_rows is exceeded, switch to truncate view. Depending on `large_repr`,
  objects are either centrally truncated or printed as a summary view. `None`
  value means unlimited.

- `display.float_format` : callable

  The callable should accept a floating point number and return a string with
  the desired format of the number. This is used in some places like
  SeriesFormatter. See `formats.format.EngFormatter` for an example.
  [default: None] [currently: None]

-- read_cvs()

## charger un fichier csv

<!-- notecardId: 1701642275374 -->

```python
df = pd.read_csv('~/filename.csv')
```

des arguements permettent d‚Äôapporter plus de fonctionalit√©s √† la fonction
`read_csv()` :

- `sep =` permet de s√©lectionner un autre type de s√©parateur que la virgule par
  d√©faut, `,` ;
- `index_col = "column_name"` pour utiliser une colonne du [[py.ds.dataframe]]
  en tant qu‚Äô[[index]], plut√¥t que la valeur par d√©faut, `0`.
- `parse_dates = ['date']` indique la colonne servant d‚Äôindice pour les
  [ds.time-serie]].

```python
compte_cheque = pd.read_csv("~/filename.csv",
                            sep = ";",
                            index_col = "date operation")
```

```{python}
df = pd.read_csv("train.csv", parse_dates = ['date'])
```

### r√©f√©rences

- [pandas.org](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html)

--- replace

## WIP !!!

<!-- notecardId: 1701642275378 -->

```python
import pandas as pd

compte_cheque = compte_cheque.replace(to_replace='NaN', value=0)
```

--- title: value_counts()

Pour compter le nombre de valeurs on peut utiliser la [[M√©thode|py.method]] `.value_counts()` :

```python
compte_cheque['Debit', 'Credit'].value_counts()
```
