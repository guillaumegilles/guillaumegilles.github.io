---
id: s2jrzf5kfa9oop1iua00m0o
title: Raytracing
desc: ''
updated: 1709227518453
created: 1709128894713
---

“Rendering” is the final process of a movie, when the technical directors at Pixar calculate the color of every pixel in every frame of every shot in the film. If that sounds incredibly time-consuming, it is! But Pixar gets help from some mathematical equations.

## [Introduction to rendering](https://www.khanacademy.org/computing/pixar/rendering/rendering1/v/overview-rendering)

Rendering is the final phase in film production, transforming 3D virtual space into a series of 2D images to create a movie. It's a complex, time-consuming process that involves calculating the color of each pixel by solving the "rendering equation". This equation describes how light, which determines color, bounces around in the environment.

Hello. Hold on for just a second, please. Welcome to "Rendering." I'm Christophe Hery and I'm a researcher at Pixar. Rendering is the last phase of the pipline and film production that takes our movies from this to this. Rendering is where the world we've created in the virtual three-dimensional space of the computer is finally realized as a series of perfectly rendered two-dimensional images that play one after another for 96 minutes and become our movie. Rendering is an incredibly time-consuming process, all focused on answering one simple question: "What color is this pixel – and then this pixel – and then this pixel and this pixel?" Seems simple enough. I mean, the balloon is blue, so the pixel will be blue, right? Well not exactly. A pixel is a tiny portion of the final image. It acts like a little window into the virtual 3D world. To understand what color it should be, we have to figure out what part of the picture we see through that window. We translate this question, "What color is this pixel?", into math. This equation is called the "rendering equation." It's a mathematical description of how light bounces around in the environment. I know we said "color." And this equation is about light. But there's a good reason for that. Color is light – just light +of different wavelengths. So when we ask the question, "What color is this pixel?", we're really asking "What light is coming through this pixel towards the camera?" The solution to the equation will be the answer to our question. "This pixel is – purple?" [Asks in an unsure way.] To render a movie like "Up," we have to ask this question: "What color is this pixel?" billions and billions of times. But just like every part of this process, each little calculation isn't hard to do. It's the layer upon layer of calculation that makes it complex, but also makes it possible to bring something this beautiful to the screen.

## [what is ray tracing](https://www.khanacademy.org/computing/pixar/rendering/rendering1/v/rendering-1)

Susan Fong from Pixar explains how a virtual camera and image plane create a scene. For each pixel in a scene, a ray (think of it like a laser beam) is sent from a virtual camera through that pixel into the scene. The ray then checks out what it hits first in the scene. The color of the first object it hits determines the color of the pixel.

Hi, my name is Susan Fong and I'm a rendering technical director here at Pixar Animation Studios my job is to make sure that the images you see in the theater are created as quickly and efficiently as possible now that's a big job because of Christophe described in the previous video, rendering is an extremely complicated process requiring thousands of computers all working together to render our films. The render farm is where we keep all these computers, but what are these computers doing exactly? That's the topic of this lesson. In the first part we'll take a geometric look at a renderer works. In the second part of of the lesson, we'll look at some of the equations and algebra that are needed to write a render as a computer program. So let's get started! Let's start with the drastically simplified scene from Up. This object lives in three dimensions, as we can see as we navigate around it. Just like live-action filmmaking, we need to place a camera inside the scene. In computer graphics we call this a virtual camera. We first pick a location for our virtual camera they'll be used to create the image. It's shown here in white. We also need to decide which direction our camera is pointed. That's shown here in red. Next we erect a plane upon which we'll form the image. It's called the image plane, and represents what the virtual camera will see. Notice it is perpendicular to the viewing direction. The image plane is broken up into a grid of pixels that will make up the image. In this interactive the first two sliders allow you to rotate your camera around the scene. The job of the renderer sounds simple. It must determine a color for each of these pixels. This is kind of like paint by numbers where the image plane is serving as the canvas on which the renderer is painting. Now I'm only showing you a few pixels in this example. Our real images are made up of more than two million pixels. Over the years a number of different rendering algorithms have been developed. one of the most elegant and versatile algorithms is called ray tracing. Here's how it works: to determine a color, for say this pixel, a ray tracer constructs a mathematical ray that starts at the camera, crosses the center of the pixel, and then extends off into the scene. Kind of like a laser beam pointed at the pixel but from the camera. The ray tracer computes the closest intersection point between the scene objects and this ray. It then determines the color of the intersected object at that point, and paints the picture that color. So this pixel would be colored brown, this one yellow, and so forth for the other pixels. This process is done for all of the pixels in the image. Fancier versions of ray tracing can create more subtle effects, like soft shadows and variations in lighting that helped to create different moods. The ray tracing process leads to a bunch of other questions, like how are intersection points determined? And once that intersection point is determined, how do we figure out what color it is? These mysteries and more will be revealed in the remainder of the tutorial. In this first exercise, you can practice some ray tracing yourself.

## [Light reflection](https://www.khanacademy.org/computing/pixar/rendering/rendering1/v/rendering-2)

Let's look more closely at how light behaves when it strikes an object. We'll cover diffuse and specular surface responses. The rendering equation takes three main factors into account: the amount of light falling on a point, how the surface at that point reflects light, and the position of the camera.

[Rendering Equation](https://en.wikipedia.org/wiki/Rendering_equation)

In the previous video we saw that the basic job of a ray tracer is to determine what color to paint each pixel. And it does that by casting a mathematical ray that starts at the camera, passes through a pixel, and then off into the scene. The ray tracer must then compute the closest intersection point between the ray and the scene geometry, and return that geometry's color. In this video, we're gonna look at how we determine how much light is travelling along the ray back towards camera. That's what we need to figure out in order to determine each pixel's color. This is actually a pretty deep and complicated question that is mathematically governed by the rendering equation. I know it looks scary. I mean believe me, this equation still gives me nightmares. But it's actually easy if you break it down into a few pieces. The amount of light travelling from a point on a surface back to the camera depends on three things. One, how much light is falling on that point? Two. how does the surface of the object at that point reflect light? And three, where is the camera? Let's examine each of these factors in turn using some props. My scene consists of a tennis ball and a light source. Now, the first factor is how much light is falling on a spot on that tennis ball? It's pretty obvious that the farther away the light, the lower the intensity of light falling on the ball. So, we need to know the distance to the light source and we need to know how bright the light is. It's less obvious that we need to take into account the orientation of the surface when determining how much light falls on the point. Grazing angles receive less light or energy, so they appear less bright. Whereas the point will be brighter or hotter if the surface is oriented perpendicular to the direction of the light. You feel this every sunny day. It's why it's hottest at noon and cooler in the morning and evening. If there is more than one light source, we repeat the process for each one of them. The second factor is how does the surface reflect light? The color of an object is a big part of how it responds to light. But it's not the only factor. Some objects have a fuzzy or dull appearance like the tennis ball. Others are shiny and display bright highlights like this pool ball. These two objects are receiving the same amount of light, but they look very different. Other surfaces are somewhere in between dull and shiny like human skin, wood, or even hair. Dull surfaces are said to be diffuse and shiny surfaces are said to be specular. Finally, the last factor is where is the camera? Watch the middle of the number 3 on the pool ball. Notice that as we move around, the brightness of that point changes. Even though everything else is the same the only thing changing is the location of the camera. Let's look at a virtual version of this physical situation. There are three sliders that you can control. Spotlight intensity which is like controlling the brightness of the flashlight. A diffuse slider which controls the dullness of the surface or roughness. And specular slider which controls the shininess. You can also move the spotlight around which is represented by a white dot. For every object in a Pixar movie there's a shader packet. The shader packet describes in visual detail everything about a surface. It will include photographs of what something looks like in real life. Drawings describing may be the way the roughness on a surface looks or how someone's hair should look. In this next exercise, you can sit in the seat of an artist using tools based on these concepts we just covered. Your job as a Pixar artist is to match the reference art. Have fun.

## [Light rays](https://www.khanacademy.org/computing/pixar/rendering/rendering1/v/rendering-3)

Let's look more closely at how light bounces when it strikes an object. We'll cover reflected and refracted rays, direct and indirect illumination, and shadow rays. Refracted rays follow the path light takes when it passes through a transparent object, like a glass of water. Reflected rays follow the path light takes when it bounces off a shiny surface. [Click here](https://www.khanacademy.org/science/physics/geometric-optics/reflection-refraction/v/refraction-in-water) for more detail on refraction!

(introductory sound) In the previous video, we've talked about what color a point on a surface is by considering three factors: One, how much light falls on the point. Two, how the surface reflects light, and three, where the camera is. For the first factor, the ray tracer needs to determine if the point being considered is visible to the light source. This is actually pretty easy to answer. The ray tracer constructs a ray that starts at the point being shaded and launches off in the direction of the light source. These rays to light sources are called, naturally enough, shadow rays. Here's an example of an point that is visible to the light source, because the shadow ray doesn't hit anything but the light source. It's important to notice that only some of the light falling on a point comes directly from the light sources. This is called direct illumination. In the real world, some of the light comes from other objects in the scene as well. Notice that I can bounce light off this card, which you can see adds to the light hitting my face. This is an example of indirect illumination. As another example of indirect illumination, you can see a reflection of the tennis ball in the pool ball. A ray tracer can account for such reflections by sending another ray in the reflection direction. The direction of this reflective ray is determined by how a light ray would bounce naturally in the same way a pool ball bounces. This technique was used, for instance, in Cars 2 because reflections off shiny cars were super important to the look of the film. If the object is partially transparent, like this glass cup, the ray tracer can do a similar thing and launch a ray in the refracted direction. Refracted rays pass through an object while reflected rays bounce off of them. When the rays pass through an object, such as this glass, the rays bend in different directions instead of in straight lines, which explains why the image you see of me through this glass looks warped. (ding) The ray tracer can keep doing this, casting rays, sending out reflective and refractive rays to account for reflections, the refractions, and so on. Then, it uses all of these rays to determine the final pixel color. In this next exercise, you can test your understanding of these concepts.